[2026-02-19 14:46:25] OUT_DIR=/home/rocc/first/task1-artifacts-20260219-144625
[2026-02-19 14:46:25] RUN_LOG_FILE=/home/rocc/first/task1-artifacts-20260219-144625/run.log
[2026-02-19 14:46:25] === Startup begin ===
[2026-02-19 14:46:26] Waiting for Kubernetes API
[2026-02-19 14:46:29] Waiting for nodes Ready
[2026-02-19 14:46:30] Dump cluster state
[2026-02-19 14:46:44] Restart in ns=kong
Waiting for deployment "kong-kong" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "kong-kong" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "kong-kong" rollout to finish: 1 old replicas are pending termination...
deployment "kong-kong" successfully rolled out
[2026-02-19 14:47:32] Restart in ns=monitoring
Waiting for deployment "fake-gpu-metrics" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "fake-gpu-metrics" rollout to finish: 1 old replicas are pending termination...
deployment "fake-gpu-metrics" successfully rolled out
Waiting for deployment "kong-throttle-webhook" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "kong-throttle-webhook" rollout to finish: 1 old replicas are pending termination...
deployment "kong-throttle-webhook" successfully rolled out
Waiting for deployment "tenant-api" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "tenant-api" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "tenant-api" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "tenant-api" rollout to finish: 1 old replicas are pending termination...
deployment "tenant-api" successfully rolled out
[2026-02-19 14:49:42] Restart in ns=tenant-a
Waiting for deployment "fake-llm" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "fake-llm" rollout to finish: 1 old replicas are pending termination...
deployment "fake-llm" successfully rolled out
deployment "litellm" successfully rolled out
[2026-02-19 14:49:46] Restart in ns=tenant-b
Waiting for deployment "litellm" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "litellm" rollout to finish: 1 old replicas are pending termination...
deployment "litellm" successfully rolled out
[2026-02-19 14:49:53] Wait pods Ready ns=monitoring selector=app=fake-gpu-metrics
[2026-02-19 14:49:53] Wait pods Ready ns=monitoring selector=app=kong-throttle-webhook
[2026-02-19 14:49:54] Wait pods Ready ns=tenant-a selector=app=fake-llm
[2026-02-19 14:49:54] Wait pods Ready ns=tenant-a selector=app=litellm
[2026-02-19 14:49:54] Wait pods Ready ns=tenant-b selector=app=litellm
[2026-02-19 14:49:56] Port-forward ns=kong svc/kong-kong-proxy 28080:80 (log=/home/rocc/first/task1-artifacts-20260219-144625/pf-kong.log)
[2026-02-19 14:49:58] Listening OK on :28080
[2026-02-19 14:50:00] Port-forward ns=monitoring svc/kong-throttle-webhook 28083:8080 (log=/home/rocc/first/task1-artifacts-20260219-144625/pf-webhook.log)
[2026-02-19 14:50:02] Listening OK on :28083
[2026-02-19 14:50:03] Port-forward ns=monitoring svc/fake-gpu-metrics 28084:8080 (log=/home/rocc/first/task1-artifacts-20260219-144625/pf-gpu.log)
[2026-02-19 14:50:05] Listening OK on :28084
[2026-02-19 14:50:05] Wait local HTTP: webhook url=http://127.0.0.1:28083/healthz
[2026-02-19 14:50:06] OK: webhook local HTTP reachable on attempt 1
[2026-02-19 14:50:06] Wait local HTTP: gpu url=http://127.0.0.1:28084/healthz
[2026-02-19 14:50:07] OK: gpu local HTTP reachable on attempt 1
[2026-02-19 14:50:07] === Verify start (task requirement proof) ===
[2026-02-19 14:50:07] Wait HTTP 200: kong-health-tenant-a (tries=60, sleep=2s)
/home/rocc/first/startup-all.sh: 第 238 列： printf: --：無效選項
printf：用法： printf [-v var] 格式 [參數]
/home/rocc/first/startup-all.sh: 第 238 列： printf: --：無效選項
printf：用法： printf [-v var] 格式 [參數]
/home/rocc/first/startup-all.sh: 第 238 列： printf: --：無效選項
printf：用法： printf [-v var] 格式 [參數]
/home/rocc/first/startup-all.sh: 第 238 列： printf: --：無效選項
printf：用法： printf [-v var] 格式 [參數]
/home/rocc/first/startup-all.sh: 第 238 列： printf: --：無效選項
printf：用法： printf [-v var] 格式 [參數]
/home/rocc/first/startup-all.sh: 第 238 列： printf: --：無效選項
printf：用法： printf [-v var] 格式 [參數]
/home/rocc/first/startup-all.sh: 第 238 列： printf: --：無效選項
printf：用法： printf [-v var] 格式 [參數]
/home/rocc/first/startup-all.sh: 第 238 列： printf: --：無效選項
printf：用法： printf [-v var] 格式 [參數]
/home/rocc/first/startup-all.sh: 第 238 列： printf: --：無效選項
printf：用法： printf [-v var] 格式 [參數]
/home/rocc/first/startup-all.sh: 第 238 列： printf: --：無效選項
printf：用法： printf [-v var] 格式 [參數]
/home/rocc/first/startup-all.sh: 第 238 列： printf: --：無效選項
printf：用法： printf [-v var] 格式 [參數]
[2026-02-19 14:50:29] OK: kong-health-tenant-a became HTTP 200 on attempt 11
[2026-02-19 14:50:29] Wait HTTP 200: kong-health-tenant-b (tries=60, sleep=2s)
/home/rocc/first/startup-all.sh: 第 238 列： printf: --：無效選項
printf：用法： printf [-v var] 格式 [參數]
[2026-02-19 14:50:30] OK: kong-health-tenant-b became HTTP 200 on attempt 1
[2026-02-19 14:50:30] Wait HTTP 200: kong-models-tenant-a (tries=60, sleep=2s)
/home/rocc/first/startup-all.sh: 第 238 列： printf: --：無效選項
printf：用法： printf [-v var] 格式 [參數]
[2026-02-19 14:50:30] OK: kong-models-tenant-a became HTTP 200 on attempt 1
[2026-02-19 14:50:30] [A] Health checks
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 113
Connection: keep-alive
X-RateLimit-Remaining-Second: 3
X-RateLimit-Limit-Second: 5
RateLimit-Limit: 5
RateLimit-Remaining: 3
RateLimit-Reset: 1
date: Thu, 19 Feb 2026 06:50:29 GMT
server: uvicorn
X-Kong-Upstream-Latency: 291
X-Kong-Proxy-Latency: 0
Via: 1.1 kong/3.9.1
X-Kong-Request-Id: 7ac552193bfec75a4a5bdb31e2c41d33

{"healthy_endpoints":[{"model":"openai/fake-llm","api_base":"http://fake-llm:8080/v1"}],"unhealthy_endpoints":[]}HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 145
Connection: keep-alive
date: Thu, 19 Feb 2026 06:50:29 GMT
server: uvicorn
X-Kong-Upstream-Latency: 215
X-Kong-Proxy-Latency: 0
Via: 1.1 kong/3.9.1
X-Kong-Request-Id: 828ce10dfdf2d71649cb90267197f81c

{"healthy_endpoints":[{"model":"openai/gpt-3.5-turbo","api_base":"http://fake-llm.tenant-a.svc.cluster.local:8080/v1"}],"unhealthy_endpoints":[]}10
[2026-02-19 14:50:32] [B] LOW util -> expect rl disabled=true -> no 429
ok util=0
0
HTTP/1.0 200 OK
Server: BaseHTTP/0.6 Python/3.11.14
Date: Thu, 19 Feb 2026 06:50:34 GMT
Content-Type: text/plain; charset=utf-8

ok util=0 threshold=5 disabled=true patch_status=200
rl_disabled=true
200
200
200
200
200
200
200
200
200
200
[2026-02-19 14:50:36] [C] HIGH util -> expect rl disabled=false -> see 429
ok util=10
10
HTTP/1.0 200 OK
Server: BaseHTTP/0.6 Python/3.11.14
Date: Thu, 19 Feb 2026 06:50:38 GMT
Content-Type: text/plain; charset=utf-8

ok util=10 threshold=5 disabled=false patch_status=200
rl_disabled=false
200
200
200
200
200
200
200
200
200
200
[2026-02-19 14:50:40] === Verify end ===
OUT_DIR=/home/rocc/first/task1-artifacts-20260219-144625
Kong:    http://127.0.0.1:28080
Webhook: http://127.0.0.1:28083
GPU:     http://127.0.0.1:28084
[2026-02-19 14:50:40] === Startup end ===
[2026-02-19 14:50:40] Artifacts saved: /home/rocc/first/task1-artifacts-20260219-144625
