[2026-02-19 13:27:26] Run log file: /home/rocc/first/startup-all.20260219-132726.log
[2026-02-19 13:27:26] === Startup begin ===
[2026-02-19 13:27:26] Current context: kind-task1
[2026-02-19 13:27:26] Waiting for Kubernetes API to be reachable
[2026-02-19 13:27:26] Waiting for nodes to be Ready
[2026-02-19 13:27:26] Nodes:
NAME                  STATUS   ROLES           AGE   VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE                         KERNEL-VERSION      CONTAINER-RUNTIME
task1-control-plane   Ready    control-plane   22h   v1.35.0   172.18.0.4    <none>        Debian GNU/Linux 12 (bookworm)   6.17.0-14-generic   containerd://2.2.0
task1-worker          Ready    <none>          22h   v1.35.0   172.18.0.2    <none>        Debian GNU/Linux 12 (bookworm)   6.17.0-14-generic   containerd://2.2.0
task1-worker2         Ready    <none>          22h   v1.35.0   172.18.0.3    <none>        Debian GNU/Linux 12 (bookworm)   6.17.0-14-generic   containerd://2.2.0
[2026-02-19 13:27:26] kind context detected: cluster=task1
[2026-02-19 13:27:26] kind nodes already have postgres:15-alpine; skip pull/load
[2026-02-19 13:27:27] kind nodes already have python:3.11-slim; skip pull/load
[2026-02-19 13:27:28] tenant-a: quota hard already >= target; skip patch (requests.cpu=750m, limits.cpu=1500m)
[2026-02-19 13:27:28] Namespace kong exists. Restarting deployments/statefulsets
[2026-02-19 13:27:28] Rollout status (deploy) in kong
[2026-02-19 13:27:28]   deployment.apps/kong-kong
Waiting for deployment "kong-kong" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "kong-kong" rollout to finish: 1 old replicas are pending termination...
deployment "kong-kong" successfully rolled out
[2026-02-19 13:28:04] Rollout status (statefulset) in kong
[2026-02-19 13:28:05] Namespace monitoring exists. Restarting deployments/statefulsets
[2026-02-19 13:28:05] Rollout status (deploy) in monitoring
[2026-02-19 13:28:05]   deployment.apps/fake-gpu-metrics
Waiting for deployment "fake-gpu-metrics" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "fake-gpu-metrics" rollout to finish: 1 old replicas are pending termination...
deployment "fake-gpu-metrics" successfully rolled out
[2026-02-19 13:28:08]   deployment.apps/kong-throttle-webhook
deployment "kong-throttle-webhook" successfully rolled out
[2026-02-19 13:28:08]   deployment.apps/tenant-api
Waiting for deployment "tenant-api" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "tenant-api" rollout to finish: 1 old replicas are pending termination...
deployment "tenant-api" successfully rolled out
[2026-02-19 13:30:44] Rollout status (statefulset) in monitoring
[2026-02-19 13:30:44] Namespace tenant-a exists. Restarting deployments/statefulsets
[2026-02-19 13:30:45] Rollout status (deploy) in tenant-a
[2026-02-19 13:30:45]   deployment.apps/fake-llm
Waiting for deployment "fake-llm" rollout to finish: 1 old replicas are pending termination...
error: timed out waiting for the condition
[2026-02-19 13:33:45]   deployment.apps/litellm
deployment "litellm" successfully rolled out
[2026-02-19 13:33:45] Rollout status (statefulset) in tenant-a
[2026-02-19 13:33:46] Namespace tenant-b exists. Restarting deployments/statefulsets
[2026-02-19 13:33:46] Rollout status (deploy) in tenant-b
[2026-02-19 13:33:46]   deployment.apps/litellm
Waiting for deployment "litellm" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "litellm" rollout to finish: 1 old replicas are pending termination...
deployment "litellm" successfully rolled out
[2026-02-19 13:33:48] Rollout status (statefulset) in tenant-b
[2026-02-19 13:33:49] Wait pods Ready: ns=monitoring selector=app=fake-gpu-metrics timeout=180s
[2026-02-19 13:33:49] Wait pods Ready: ns=monitoring selector=app=kong-throttle-webhook timeout=180s
[2026-02-19 13:33:50] Wait pods Ready: ns=tenant-a selector=app=fake-llm timeout=180s
[2026-02-19 13:35:17] Wait pods Ready: ns=tenant-a selector=app=litellm timeout=180s
[2026-02-19 13:35:18] Wait pods Ready: ns=tenant-b selector=app=litellm timeout=180s
[2026-02-19 13:35:19] Starting port-forward 127.0.0.1:28080 -> svc/kong-kong-proxy:80 (ns=kong)
[2026-02-19 13:35:21] Port-forward listening on 127.0.0.1:28080. Log: /home/rocc/k8s-startup-logs/kong-portforward-28080.log
[2026-02-19 13:35:22] Starting port-forward 127.0.0.1:28083 -> svc/kong-throttle-webhook:8080 (ns=monitoring)
[2026-02-19 13:35:24] Port-forward listening on 127.0.0.1:28083. Log: /home/rocc/k8s-startup-logs/webhook-portforward-28083.log
[2026-02-19 13:35:24] Pods overview (error states)
[2026-02-19 13:35:25] Health check via Kong (retry until HTTP 200, max ~60s)
[2026-02-19 13:35:25] Kong health OK (HTTP 200) on attempt 1
[2026-02-19 13:35:25] Webhook healthz/decide (retry decide, max ~60s)
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100     3    0     3    0     0      2      0 --:--:--  0:00:01 --:--:--     2100     3    0     3    0     0      2      0 --:--:--  0:00:01 --:--:--     2
HTTP/1.0 200 OK
Server: BaseHTTP/0.6 Python/3.11.14
Date: Thu, 19 Feb 2026 05:35:26 GMT
Content-Type: text/plain; charset=utf-8

ok
[2026-02-19 13:35:28] Webhook decide OK (HTTP 200) on attempt 1
[2026-02-19 13:35:28] decide body:
ok util=10 threshold=5 disabled=false patch_status=200
[2026-02-19 13:35:28] Backup endpoints (kind node IP):
[2026-02-19 13:35:28]   Kong NodePort:    http://172.18.0.4:31451
[2026-02-19 13:35:28]   Webhook NodePort: http://172.18.0.4:30217
[2026-02-19 13:35:28] Port-forward endpoints:
[2026-02-19 13:35:28]   Kong:    http://127.0.0.1:28080
[2026-02-19 13:35:28]   Webhook: http://127.0.0.1:28083
[2026-02-19 13:35:28] === Startup end ===
